{"version":3,"sources":["../../src/typescript/home.ts"],"names":["$","toggleAccountPopup","state","message","color","accountPopup","text","css","fadeIn","fadeOut","searchBarWindowResize","allowSearchBarResize","windowWidth","searchBarResize","showFull","isSearchBarExtended","searchBoxDiv","width","right","searchTxtInput","resultContainer","show","setTimeout","searchTxt","trigger","get","setSelectionRange","hide","instantSearch","str","displayResult","flowsData","error","val","html","append","each","ind","id","title","off","on","flowData","searchResultData","attr","flowID","displayFullFlowData","length","ajax","method","url","flowshareURLs","api","encodeURI","timeout","success","data","reqData","JSON","parse","e","globalSearch","match","searchFilters","search","searchTags","URLSearchParams","key","value","window","location","toString","flowSearchBackArrowPress","applyFilters","displayFilters","name","displayType","result","responseDiv","parent","children","filterWindowResize","extentFilter","allowFilterExtend","isFilterExtended","extend","removeClass","addClass","footerWindowResize","reload","history","pushState","queryTopFlows","queryMode","offset","flowBrowserOffset","type","decodeBrowserRequestData","flowBrowserFlows","displayFlowsList","querySearchFlow","resultCount","flowContainerList","prepend","header","showBackButton","flowsRequestData","backButton","index","triggerFlowContainerClick","flowIndex","parseInt","downloadFlow","flowDataWindowResize","body","flowBackArrowClick","displayFlowReviews","response","status","reviewButton","element","document","createElement","setAttribute","style","display","appendChild","click","removeChild","alert","footerDiv","filterDiv","filterBottom","position","top","height","flowContainerBottom","bottomContainer","Math","max","windowHeight","homepage","homepageDir","account","Cookies","getJSON","headerAccountUser","token","console","remove","searchStr","parentElement","target","loc","href","replace","split","slice","join","sort","defaultFilterValues","default","filterName","filterData","tag","sel","filterValue","isDefault","scrollingUpdate","remainScroll","prop","scrollTop"],"mappings":"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","sourcesContent":["// ############################################################################################\r\n// ######################################## INTERFACES ########################################\r\n// ############################################################################################\r\n\r\ninterface Flow {\r\n    id: string;\r\n    date: string;\r\n    user: string;\r\n    userid: string;\r\n    title: string;\r\n    description: string;\r\n    ratings: string;\r\n    downloads: string;\r\n    lastmodified: string;\r\n}\r\n\r\ninterface AccountData {\r\n    error?: string;\r\n    id: string;\r\n    coins: string;\r\n    username: string;\r\n    password: string;\r\n    email: string;\r\n    token: string;\r\n    flows: null | Flow[];\r\n    priv: string;\r\n    ip: string;\r\n    banned: string;\r\n    verified: string;\r\n    daily: string;\r\n}\r\n\r\ninterface FlowReview {\r\n    userid: string;\r\n    date: string;\r\n    username: string;\r\n    comment: string;\r\n    isedited: '0' | '1';\r\n}\r\n\r\n\r\n// ##########################################################################################\r\n// ######################################## APP CORE ########################################\r\n// ##########################################################################################\r\n\r\n$(function () {\r\n\r\n\r\n    // --------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- GLOBAL FUNCTIONS ----------------------------------------\r\n    // --------------------------------------------------------------------------------------------------\r\n\r\n    let windowWidth = <number>$(window).width();\r\n    let windowHeight = <number>$(window).height();\r\n\r\n    let body = $('body');\r\n    const flowshareURLs = {\r\n        homepage: 'https://rasphost.com/flowshare/web/test/home/',\r\n        homepageDir: '/flowshare/web/test/home/',\r\n        api: 'https://rasphost.com/flowshare/',\r\n    };\r\n\r\n    $(window).on('resize', () => {\r\n\r\n        windowWidth = <number>$(window).width();\r\n        windowHeight = <number>$(window).height();\r\n\r\n        searchBarWindowResize();\r\n\r\n        filterWindowResize();\r\n\r\n        flowDataWindowResize();\r\n\r\n        footerWindowResize();\r\n\r\n    });\r\n\r\n\r\n    // --------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- CHECKING ACCOUNT ----------------------------------------\r\n    // --------------------------------------------------------------------------------------------------\r\n\r\n    let account: AccountCookie = Cookies.getJSON('account'),\r\n        accountPopup = $('#header-account-popup'),\r\n        headerAccountUser = $('#header-account-user');\r\n\r\n    if (account && account['token']) {\r\n\r\n        headerAccountUser.text('Connecting...');\r\n\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: `${flowshareURLs.api}account.php`,\r\n            data: {\r\n                token: account['token'],\r\n            },\r\n            success: (data: string) => {\r\n\r\n                let reqData: AccountData;\r\n                try {\r\n                    reqData = JSON.parse(data);\r\n                } catch (e) {\r\n                    return console.error(e);\r\n                }\r\n\r\n                if (reqData['error']) {\r\n                    headerAccountUser.text('Account');\r\n                    toggleAccountPopup(true, reqData['error'], '#ff5b5f');\r\n                    setTimeout(toggleAccountPopup, 8000, false);\r\n\r\n                    if (!Cookies.getJSON('account')['email']) Cookies.remove('account');\r\n                }\r\n\r\n                headerAccountUser.text(reqData['username']);\r\n\r\n            },\r\n            error: () => {\r\n                toggleAccountPopup(true, 'AJAX error', '#ff5b5f');\r\n                headerAccountUser.text('Account');\r\n                setTimeout(toggleAccountPopup, 8000, false);\r\n            },\r\n        });\r\n\r\n    }\r\n\r\n    accountPopup.on('click.flowshare', () => {\r\n        toggleAccountPopup(false);\r\n    });\r\n\r\n    function toggleAccountPopup(state: boolean, message?: string, color?: string) {\r\n\r\n        if (!state) {\r\n            return accountPopup.fadeOut();\r\n        }\r\n\r\n        accountPopup\r\n            .text(<string>message)\r\n            .css('backgroundColor', <string>color)\r\n            .fadeIn();\r\n\r\n    }\r\n\r\n\r\n    // -----------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- SEARCH BAR RESIZING ----------------------------------------\r\n    // -----------------------------------------------------------------------------------------------------\r\n\r\n    let allowSearchBarResize: boolean = windowWidth < 750;\r\n    const resultContainer = $('#search-results');\r\n    const searchTxtInput = $('#search-txt');\r\n\r\n\r\n    /**\r\n     * Function triggered when the window width changes, in order to define if the search bar can be resized when hover\r\n     */\r\n    function searchBarWindowResize() {\r\n        allowSearchBarResize = windowWidth < 750;\r\n    }\r\n\r\n    const searchBoxDiv = $('#search-box');\r\n\r\n    searchBoxDiv.on('mouseenter mouseleave', e => {\r\n        if (e.type === 'mouseenter')\r\n            searchBarResize(true);\r\n        else\r\n            searchBarResize(false);\r\n    });\r\n\r\n\r\n    let isSearchBarExtended: boolean = false;\r\n\r\n    /**\r\n     * Extent or collapse the search bar in the header\r\n     * @param showFull `true` : extend bar, `false` : collapse it\r\n     */\r\n    function searchBarResize(showFull: boolean) { // manage search bar on mobile (takes entire screen when focused)\r\n\r\n        if (!allowSearchBarResize || isSearchBarExtended === showFull) return;    // if can't be resized (screen is too big or already extended)\r\n\r\n        if (showFull) { // full search bar\r\n\r\n            $('#logo-big, #header-account').fadeOut(200);   // makes logo and account disappear\r\n            searchBoxDiv.css({  // expand global div\r\n                width: '280px',\r\n                right: 'calc((100% - 280px) / 2)',\r\n            });\r\n            searchTxtInput.css('width', '230px'); // expand search field\r\n            resultContainer.show(); // shows results\r\n\r\n            setTimeout(() => {\r\n                isSearchBarExtended = true;\r\n                const searchTxt = <HTMLInputElement>$('#search-txt')\r\n                    .trigger('focus') // put focus on search field\r\n                    .get(0);\r\n                searchTxt.setSelectionRange(999999, 999999); // put cursor at the end of the text\r\n            }, 100);\r\n\r\n        } else {    // close search bar\r\n\r\n            $('#logo-big, #header-account').fadeIn(200);    // makes logo and account appear\r\n            searchBoxDiv\r\n                .css({  // collapse global div\r\n                    width: 'auto',\r\n                    right: '120px',\r\n                })\r\n                .trigger('blur');    // remove the focus\r\n            searchTxtInput.css('width', '0');     // collapse search field\r\n            resultContainer.hide(); // hide results\r\n            isSearchBarExtended = false;\r\n\r\n        }\r\n    }\r\n\r\n\r\n    // -------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- SEARCH FUNCTION ----------------------------------------\r\n    // -------------------------------------------------------------------------------------------------\r\n\r\n    let searchResultData: any;   // array with result flows from search\r\n\r\n    searchTxtInput.on('blur', () => {   // remove instant search on text blur\r\n        setTimeout(     // timeout because if it's disappear too fast the user can't click on the search results\r\n            () => {\r\n                searchBarResize(false);\r\n                resultContainer\r\n                    .css('padding', '0')\r\n                    .html('');\r\n            },\r\n            100,\r\n        );\r\n\r\n    });\r\n\r\n\r\n    // ----- INSTANT SEARCH -----\r\n\r\n    searchTxtInput.on('keyup focus', function () {// trigger instant search\r\n\r\n        let searchStr = <string>$(this).val() || '';  // text entered in the search field\r\n\r\n        if (searchStr.match(/^ *$/))  // if field is blank\r\n            return resultContainer\r\n                .css('padding', '0')\r\n                .html('');\r\n\r\n        instantSearch(searchStr);\r\n\r\n    });\r\n\r\n\r\n    /**\r\n     * Display the result of the instant search below the search box\r\n     * @param str the term to search\r\n     */\r\n    function instantSearch(str: string) {\r\n\r\n        if (str.length > 31) return displayResult(null, 'Text is too long');\r\n\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: `${flowshareURLs.api}search.php?instant&text=${encodeURI(str)}`,\r\n            timeout: 2000,\r\n            success: (data: string) => {\r\n\r\n                let reqData: any;\r\n                try {\r\n                    reqData = JSON.parse(data);\r\n                } catch (e) {\r\n                    return displayResult(null, 'JSON parse error');\r\n                }\r\n\r\n                if (reqData.error) return displayResult(null, reqData.error);\r\n\r\n                searchResultData = <Flow[]>reqData;\r\n                displayResult(<Flow[]>reqData);\r\n\r\n            },\r\n            error: () => {\r\n                displayResult(null, 'AJAX error');\r\n            },\r\n        });\r\n\r\n        // Format result\r\n        function displayResult(flowsData: Flow[] | null, error?: string | undefined) {\r\n\r\n            if ($('#search-txt').val() !== str) return;\r\n\r\n            resultContainer\r\n                .css('padding', '8px')\r\n                .html('');\r\n\r\n            if (error) return resultContainer.append(\r\n                $('<div class=\"result\" style=\"cursor: default;\"></div>').text(error),\r\n            );\r\n\r\n            $.each(flowsData, function (ind: string, val: Flow) {\r\n\r\n                resultContainer.append(\r\n                    $(`<div class=\"result\" data-flow-index=\"${ind}\" data-flow-id=\"${val.id}\"></div>`).text(val.title),\r\n                );\r\n\r\n            });\r\n\r\n            $('.result').off('flowshare.click').on('click.flowshare', function () {\r\n\r\n                let flowData = searchResultData[<string>$(this).attr('data-flow-index')];\r\n                let flowID = <string>$(this).attr('data-flow-id');\r\n\r\n                displayFullFlowData(flowData, flowID);\r\n\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // ----- GLOBAL SEARCH -----\r\n\r\n    searchBoxDiv.on('submit click', function (e) {     // starts global search\r\n        const parentElement = <HTMLElement>e.target.parentElement;\r\n        if (\r\n            (e.target.id === 'search-btn' || parentElement.id === 'search-btn' || e.type !== 'click') // if the goof element or the good event is triggered\r\n            && (isSearchBarExtended  // if the search bar is not collapsed\r\n            || !allowSearchBarResize))   // if the search bar is too small so that the search bar can't be collapsed\r\n            globalSearch(<string>$('#search-txt').val());\r\n    });\r\n\r\n    function globalSearch(str: string) {\r\n\r\n        if (str.match(/^[ ]*$/)) return;\r\n\r\n        searchFilters.search = str;\r\n\r\n        let searchTags = new URLSearchParams();\r\n        $.each(searchFilters, (key: string, value) => {\r\n            searchTags.append(key, <string>value);\r\n        });\r\n        window.location.search = searchTags.toString();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Add the trigger so that when the back arrow is pressed, it applies the filter\r\n     */\r\n    function flowSearchBackArrowPress(): void {   // when back arrow pressed on search list\r\n        $('#flow-search-back-arrow').off('click.flowshare').on('click.flowshare', () => {\r\n            applyFilters(true);\r\n        });\r\n    }\r\n\r\n\r\n    // ----------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- ACCOUNT MANAGEMENT ----------------------------------------\r\n    // ----------------------------------------------------------------------------------------------------\r\n\r\n    // todo: check token\r\n\r\n    $('#header-account').on('click.flowshare', () => {\r\n\r\n        // redirect on account page\r\n        let loc = window.location.href;\r\n\r\n        if (loc.match(/\\/home\\/.*/))\r\n            window.location.href = `${loc.replace(/home\\/.*/, '')}account/`;\r\n        else\r\n            window.location.href = `${loc.split('/').slice(0, -1).join('/')}/account/`;\r\n\r\n    });\r\n\r\n\r\n    // ----------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- LOAD FILTERS ----------------------------------------\r\n    // ----------------------------------------------------------------------------------------------\r\n\r\n    let searchFilters: {\r\n        [key: string]: string | null\r\n    } = {\r\n        sort: null,\r\n        id: null,\r\n        search: null,\r\n    };\r\n\r\n    let defaultFilterValues: {\r\n        [key: string]: {\r\n            default?: string,\r\n            display: boolean,\r\n            displayType?: string,\r\n            type: string\r\n        }\r\n    } = {\r\n        sort: {\r\n            default: 'new',\r\n            display: true,\r\n            displayType: 'filter',\r\n            type: 'string',\r\n        },\r\n        id: {\r\n            default: undefined,\r\n            display: false,\r\n            type: 'int',\r\n        },\r\n        search: {\r\n            default: undefined,\r\n            display: true,\r\n            displayType: 'search',\r\n            type: 'string',\r\n        },\r\n    };\r\n\r\n    let searchTags = new URLSearchParams(window.location.search);\r\n\r\n    let responseDiv = $('.response');\r\n\r\n    $.each(defaultFilterValues, (filterName: string, filterData: any) => {    // for each possible filters\r\n\r\n        let tag = searchTags.get(filterName) || filterData.default;  // getting actual value or set the default one\r\n        let result;\r\n\r\n        if (filterData.display) {    // if the value can be displayed\r\n\r\n            result = displayFilters(filterName, tag, filterData.displayType);   // tries to display the value\r\n            if (!result) displayFilters(filterName, filterData.default, filterData.displayType);    // if value wasn't displayed then display the default one\r\n\r\n        } else result = true;\r\n\r\n        if (filterData.default !== tag && result) searchFilters[filterName] = tag;    // if not default then value put it in filters list\r\n    });\r\n\r\n\r\n    /**\r\n     * Tries to display the filter if possible\r\n     * @param name filter name\r\n     * @param value filter value\r\n     * @param displayType filter value type\r\n     * @return boolean true if the filter is applied, otherwise false\r\n     */\r\n    function displayFilters(name: string, value: string, displayType: string): boolean {\r\n        let result = false;\r\n\r\n        if (displayType === 'filter') {\r\n\r\n            responseDiv.each(function () {\r\n                if ($(this).attr('data-filter-value') !== value) return;  // if wrong div\r\n                $(this).parent().children('.response').css('backgroundColor', 'transparent');   // removing color of other fibers\r\n                $(this).css('backgroundColor', '#fdcb6e');  // setting color of selection\r\n                result = true;\r\n            });\r\n\r\n        } else if (displayType === 'search') {\r\n            searchTxtInput.val(value);\r\n            result = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    responseDiv.css('transition', '.4s');    // activating animation (disabled for fastest loading display)\r\n\r\n\r\n    // --------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- FILTER SELECTION ----------------------------------------\r\n    // --------------------------------------------------------------------------------------------------\r\n\r\n    // ----- FILTERS STYLE -----\r\n\r\n    let isFilterExtended = true;\r\n    let allowFilterExtend = windowWidth < 1000;\r\n\r\n    if (windowWidth < 1000) $('#nav-arrow').show();\r\n\r\n    $('nav .title').on('click', () => {\r\n        extentFilter(isFilterExtended);\r\n        isFilterExtended = !isFilterExtended;\r\n    });\r\n\r\n\r\n    /**\r\n     * Function triggered when the window width changes, in order to define the position of the filter and if it can be extended\r\n     */\r\n    function filterWindowResize() {\r\n        if (windowWidth < 1000) {\r\n            extentFilter(true);\r\n            allowFilterExtend = true;\r\n            $('#nav-arrow').show();\r\n        } else {\r\n            extentFilter(false);\r\n            allowFilterExtend = false;\r\n            $('#nav-arrow').hide();\r\n        }\r\n        isFilterExtended = <number>$('nav').width() < 100;\r\n    }\r\n\r\n\r\n    /**\r\n     * Extend of collapse the filter\r\n     * @param extend `true` to extend, `false` to collapse\r\n     */\r\n    function extentFilter(extend: boolean): void {\r\n        if (!allowFilterExtend) return;\r\n        if (extend) {\r\n            $('nav').css('height', '60px');\r\n            $('#nav-arrow').removeClass('active');\r\n        } else {\r\n            $('nav').css('height', '310px');\r\n            $('#nav-arrow').addClass('active');\r\n        }\r\n        setTimeout(footerWindowResize, 400);  // manage the footer position\r\n    }\r\n\r\n    $('.filter').on('click', '.response', function () {\r\n        let sel = $(this);\r\n        sel.parent().children('.response').css('backgroundColor', 'transparent');   // removing color of other fibers\r\n        sel.css('backgroundColor', '#fdcb6e');  // setting color of selection\r\n\r\n        // ----- MANAGE FILTERS -----\r\n\r\n        let filterName = <string>sel.parent().attr('data-filter-name');\r\n        let filterValue = <string>sel.attr('data-filter-value');\r\n        let isDefault = defaultFilterValues[filterName].default === filterValue;\r\n\r\n        if (isDefault)\r\n            delete searchFilters[filterName];\r\n        else\r\n            searchFilters[filterName] = filterValue;\r\n\r\n    });\r\n\r\n    // ----- APPLY FILTERS -----\r\n\r\n    $('#apply-filters').on('click', () => {\r\n        applyFilters(true);\r\n    });\r\n\r\n\r\n    /**\r\n     * Update the URL with the new filters (without the search)\r\n     * @param reload if the page needs to be reloaded or if the URL needs to be changed dynamically\r\n     */\r\n    function applyFilters(reload: boolean): void {\r\n        let searchTags = new URLSearchParams();\r\n        delete searchFilters.search;\r\n        $.each(searchFilters, (key: string, value) => {\r\n            if (value !== null)\r\n                searchTags.append(key, <string>value);\r\n        });\r\n        if (reload)\r\n            window.location.search = searchTags.toString();\r\n        else if (searchTags.toString() === '')\r\n            history.pushState({}, '', './');\r\n        else\r\n            history.pushState({}, '', `?${searchTags.toString()}`);\r\n\r\n    }\r\n\r\n\r\n    // -----------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- FLOWS BROWSER ----------------------------------------\r\n    // -----------------------------------------------------------------------------------------------\r\n\r\n    let flowBrowserOffset = 0;\r\n    let flowBrowserFlows: Flow[] = [];\r\n\r\n    if (!searchFilters.search)\r\n        queryTopFlows(<string>searchFilters.sort);\r\n    else\r\n        querySearchFlow(searchFilters.search);\r\n\r\n    let flowsRequestData: Flow[];\r\n    let flowContainerList = $('#flow-list-container');\r\n\r\n\r\n    /**\r\n     * Query the flows and display them in the flow container list\r\n     * @param queryMode `new` or `null` for the top new, `rated` for the top rated\r\n     */\r\n    function queryTopFlows(queryMode?: string) {\r\n\r\n        let data: any = { offset: flowBrowserOffset };\r\n\r\n        if (queryMode === 'rated')\r\n            data['rated'] = 1;\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: `${flowshareURLs.api}flows.php`,\r\n            data: data,\r\n            timeout: 5000,\r\n            success: (data: string) => {\r\n\r\n                if (!decodeBrowserRequestData(data))\r\n                    return;\r\n                let reqData = <Flow[]>decodeBrowserRequestData(data);\r\n\r\n                flowBrowserFlows = [ ...flowBrowserFlows, ...reqData ];\r\n                displayFlowsList();\r\n\r\n            },\r\n            error: () => {\r\n                $('#flows-loading').html('Error when getting flows list: AJAX error<br>Please reload page or contact the site administrator.');\r\n            },\r\n        });\r\n    }\r\n\r\n    function querySearchFlow(str: string) {\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: `${flowshareURLs.api}search.php`,\r\n            data: {\r\n                text: str,\r\n                offset: flowBrowserOffset,\r\n            },\r\n            timeout: 5000,\r\n            success: (data: string) => {\r\n\r\n                if (!decodeBrowserRequestData(data))\r\n                    return;\r\n                let reqData = <Flow[]>decodeBrowserRequestData(data);\r\n\r\n                flowBrowserFlows = [ ...flowBrowserFlows, ...reqData ];\r\n                const resultCount: number = flowBrowserFlows.length;\r\n                displayFlowsList(`${resultCount} result${resultCount > 1 ? 's' : ''}</span> for ${str}`, true);\r\n\r\n            },\r\n            error: () => {\r\n                $('#flows-loading').html('Error when getting flows list: AJAX error<br>Please reload page or contact the site administrator.');\r\n            },\r\n        });\r\n\r\n    }\r\n\r\n    function decodeBrowserRequestData(data: string): boolean | Flow[] {\r\n\r\n        let reqData;\r\n        try {\r\n            reqData = JSON.parse(data);\r\n        } catch (e) {\r\n            $('#flows-loading').html(`JSON Parse error<br>Error: <br>${e}<br>Response body:<br>${data}`);\r\n            return false;\r\n        }\r\n\r\n        if (reqData.error && flowBrowserFlows.length === 0) {\r\n            flowContainerList.prepend('<i class=\"fas fa-chevron-circle-left back-arrow\" id=\"flow-search-back-arrow\" style=\"top: 5px; left: 5px\"></i>');\r\n            flowSearchBackArrowPress();\r\n            $('#flows-loading').html(`Error: ${reqData.error}`);\r\n            return false;\r\n        }\r\n\r\n        return reqData;\r\n\r\n    }\r\n\r\n    function displayFlowsList(header?: string, showBackButton?: boolean) {\r\n\r\n        let data: Flow[] = flowBrowserFlows;\r\n\r\n        flowsRequestData = data;\r\n\r\n        flowContainerList.text('');\r\n\r\n        if (header) {\r\n\r\n            let backButton = showBackButton ? '<i class=\"fas fa-chevron-circle-left back-arrow\" id=\"flow-search-back-arrow\"></i>' : '';\r\n\r\n            flowContainerList.append(\r\n                $(`<div class=\"header\">${backButton}${header}</div><hr>`),\r\n            );\r\n\r\n            if (showBackButton) flowSearchBackArrowPress();\r\n\r\n        }\r\n\r\n        $.each(data, function (index, value: any) {\r\n\r\n            flowContainerList.append(\r\n                $('<div class=\"flow-container\"></div>').attr({\r\n                    'data-flow-id': value['id'],\r\n                    'data-flow-index': index,\r\n                }).append(\r\n                    $('<div class=\"flow-title\"></div>').text(value['title']),\r\n                    $('<div class=\"flow-author\"></div>').text(value['user']),\r\n                    $('<div class=\"flow-description\"></div>').text(value['description']),\r\n                    $('<div class=\"flow-downloads\"></div>')\r\n                        .append($('<i class=\"fas fa-download\"></i>')\r\n                            .append($('<span class=\"number-container\"></span>').text(value['downloads']),\r\n                            ),\r\n                        ),\r\n                    $('<div class=\"flow-rating\"></div>')\r\n                        .append($('<i class=\"far fa-star\"></i>')\r\n                            .append($('<span class=\"number-container\"></span>').text(value['ratings']),\r\n                            ),\r\n                        ),\r\n                ),\r\n            );\r\n\r\n            $('.flow-container:odd').css('backgroundColor', '#E5E5E5');\r\n\r\n            triggerFlowContainerClick();\r\n\r\n        });\r\n\r\n        footerWindowResize();   // change the footer position\r\n\r\n    }\r\n\r\n\r\n    // ----- Scroll updates -----\r\n\r\n    let scrollingUpdate = false;\r\n\r\n    body.on('scroll', () => {\r\n\r\n        let remainScroll = body.prop('scrollHeight') - <number>body.height() - <number>body.scrollTop();\r\n\r\n        if (remainScroll < 200 && !scrollingUpdate) {\r\n\r\n            flowBrowserOffset = 15;\r\n\r\n            if (!searchFilters.search)\r\n                queryTopFlows(<string>searchFilters.sort);\r\n            else\r\n                querySearchFlow(<string>searchFilters.search);\r\n\r\n            scrollingUpdate = true;\r\n\r\n        }\r\n\r\n    });\r\n\r\n\r\n    // --------------------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- DISPLAY FULL FLOW DATA ----------------------------------------\r\n    // --------------------------------------------------------------------------------------------------------\r\n\r\n\r\n    /**\r\n     * Set the trigger so when a flow is selected in the flow list, its full data is displayed in the foreground\r\n     */\r\n    function triggerFlowContainerClick() {\r\n\r\n        $('.flow-container').off('click.flowshare').on('click.flowshare', function () {\r\n\r\n            let flowIndex = parseInt(<string>$(this).attr('data-flow-index'));\r\n            let flowID = <string>$(this).attr('data-flow-id');\r\n            let flowData = flowsRequestData[flowIndex];\r\n\r\n            displayFullFlowData(flowData, flowID);\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Display the full flows data in the foreground\r\n     * @param flowData the flow data\r\n     * @param flowID the flow ID on flowshare\r\n     */\r\n    function displayFullFlowData(flowData: Flow, flowID: string) {\r\n\r\n        $('#flow-data')\r\n            .html('')\r\n            .append(\r\n                '<i class=\"fas fa-chevron-circle-left back-arrow\" id=\"full-flow-data-back-arrow\"></i>',\r\n                $('<div class=\"flow-title\"></div>').text(flowData['title']),\r\n                $('<div class=\"flow-author\"></div>').text(flowData['user']),\r\n                $('<div class=\"flow-description\"></div>').text(flowData['description']),\r\n                $('<div id=\"flow-data-bar\" style=\"margin-bottom: 20px\"></div>').append(\r\n                    $('<div></div>').append(\r\n                        $('<i class=\"fas fa-download\"></i>').append(\r\n                            $('<span class=\"number-container\"></span>').text(flowData['downloads']),\r\n                        ),\r\n                    ),\r\n                    $('<div></div>').append(\r\n                        $('<i class=\"far fa-star\"></i>').append(\r\n                            $('<span class=\"number-container\"></span>').text(flowData['ratings']),\r\n                        ),\r\n                    ),\r\n                    '<div id=\"download-button\"><i class=\"fas fa-file-download\" style=\"margin-right: 5px\"></i>Download</div>',\r\n                    '<div style=\"float: none\" id=\"review-button\"><i class=\"fas fa-user-plus\" style=\"margin-right: 5px\"></i>Add review</div>',\r\n                ),\r\n            )\r\n            .css('opacity', 1)\r\n            .css('pointerEvents', 'all');\r\n\r\n\r\n        // manage download button\r\n\r\n        $('#download-button').off('click.flowshare').on('click.flowshare', () => {\r\n            downloadFlow(flowID, flowData['title']);\r\n        });\r\n        flowDataWindowResize();\r\n\r\n        // manage review button\r\n        $('#review-button').on('click', function (e) {\r\n\r\n        });\r\n\r\n        // manage flow list\r\n\r\n        flowContainerList.css('opacity', 0);\r\n        if (windowWidth < 1000) $('nav').css('opacity', 0);\r\n        body.css('pointerEvents', 'none');\r\n        $('header').css('pointerEvents', 'all');\r\n\r\n        flowBackArrowClick();\r\n\r\n        // query flow ratings\r\n\r\n        $.ajax({\r\n            url: `${flowshareURLs.api}reviews.php?view&id=${flowID}`,\r\n            method: 'GET',\r\n            timeout: 4000,\r\n            success: (data: string) => {\r\n\r\n                let reqData: FlowReview[];\r\n                try {\r\n                    reqData = JSON.parse(data);\r\n                } catch (e) {\r\n                    return displayFlowReviews(null, data);\r\n                }\r\n\r\n                displayFlowReviews(reqData);\r\n\r\n            },\r\n            error: (response) => {\r\n                if (response.status === 404) return;    // if no ratings\r\n                $('#flow-data').append(\r\n                    $(`<div class=\"rating-container\">Error when getting flow reviews : <br>AJAX error code ${response.status}</div>`),\r\n                );\r\n            },\r\n\r\n        });\r\n\r\n        // update url\r\n\r\n        searchFilters['id'] = <string>flowID;\r\n        applyFilters(false);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Set the trigger so when the back arrow is pressed on full flow data display, it goes back on the flow list\r\n     */\r\n    function flowBackArrowClick() {\r\n        $('#full-flow-data-back-arrow')\r\n            .off('click.flowshare')\r\n            .on('click.flowshare', () => {\r\n                triggerFlowContainerClick();\r\n                $('#flow-list-container, nav')\r\n                    .css('opacity', 1);\r\n                body\r\n                    .css('pointerEvents', 'all');\r\n                $('#flow-data')\r\n                    .css('opacity', 0)\r\n                    .css('pointerEvents', 'none')\r\n                    .html('');\r\n                delete searchFilters.id;\r\n                applyFilters(false);\r\n            });\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Function triggered when the window width changes on the full flow data display, in order to fix a margin bug for the review button\r\n     */\r\n    function flowDataWindowResize() {\r\n\r\n        // fix margin bug with review button\r\n        let reviewButton = $('#review-button');\r\n\r\n        if (windowWidth < 900 || (windowWidth > 1000 && windowWidth < 1350))\r\n            reviewButton.css('left', '6%');\r\n        else\r\n            reviewButton.css('left', '0');\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Display the reviews of a flow at the bottom of the full flow data\r\n     * @param data the ratings data, `null` if an error\r\n     * @param error the error message to display (if there is one)\r\n     */\r\n    function displayFlowReviews(data: FlowReview[] | null, error?: string) {\r\n\r\n        if (data === null) return;\r\n\r\n        let flowData = $('#flow-data');\r\n\r\n        if (error)\r\n            flowData.append(\r\n                $(`<div class=\"rating-container\">JSON Parsing error<br>Response body:<br>${error}</div>`),\r\n            );\r\n\r\n        if (body.css('pointerEvents') === 'none' && data.length > 0) {\r\n\r\n            flowData.append(\r\n                $('<div style=\"position: relative; margin: 20px; font-size: 25px; font-weight: 600\">Ratings</div>'),\r\n            );\r\n\r\n            $.each(data, function (index, value) {\r\n\r\n                flowData.append(\r\n                    $('<div class=\"rating-container\"></div>')\r\n                        .append(\r\n                            $('<div class=\"rating-title\"></div>')\r\n                                .text(value['username'])\r\n                                .append(\r\n                                    (value['isedited'] === '1' ? ' <span style=\"opacity: .5; font-weight: lighter; margin-left: 10px\">(edited)</span>' : ''),\r\n                                ),\r\n                        )\r\n                        .append(\r\n                            $('<div class=\"rating-body\"></div>')\r\n                                .text(value['comment']),\r\n                        ),\r\n                );\r\n\r\n            });\r\n\r\n            $('.rating-container:even').css('backgroundColor', '#E5E5E5');\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Starts the download of a flow\r\n     * @param id flow id\r\n     * @param title name of the file\r\n     */\r\n    function downloadFlow(id: string | number, title: string) {\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: `${flowshareURLs.api}flows.php/id/${id}?data&base64`,\r\n            timeout: 10000,\r\n            success: (data: string) => {\r\n                let element = document.createElement('a');\r\n                element.setAttribute('href',\r\n                    `data:application/octet-stream;charset=utf-8;base64,${data}`,\r\n                );\r\n                element.setAttribute('download',\r\n                    `${title}.flo`,\r\n                );\r\n\r\n                element.style.display = 'none';\r\n                document.body.appendChild(element);\r\n\r\n                element.click();\r\n\r\n                document.body.removeChild(element);\r\n            },\r\n            error: (e) => {\r\n                alert(`Download error : ${e}`);\r\n            },\r\n        });\r\n    }\r\n\r\n\r\n    // -----------------------------------------------------------------------------------------------\r\n    // ---------------------------------------- MANAGE FOOTER ----------------------------------------\r\n    // -----------------------------------------------------------------------------------------------\r\n\r\n    footerWindowResize();\r\n\r\n    /**\r\n     * Changes the footer position (absolute or relative) depending on the windows height and the lowest container\r\n     */\r\n    function footerWindowResize() {\r\n\r\n        const footerDiv = $('footer'), filterDiv = $('nav');\r\n        // determine the lowest container\r\n        const filterBottom: number = filterDiv.position().top + (filterDiv.height() || 200) + 100;\r\n        const flowContainerBottom: number = flowContainerList.position().top + (flowContainerList.height() || 0) + 100;\r\n        const bottomContainer: number = Math.max(filterBottom, flowContainerBottom);\r\n\r\n        // set the footer position\r\n        if (bottomContainer < windowHeight - 85)\r\n            footerDiv.css({\r\n                position: 'absolute',\r\n            });\r\n        else\r\n            footerDiv.css({\r\n                position: 'relative',\r\n            });\r\n\r\n    }\r\n\r\n});\r\n"],"file":"home.js"}